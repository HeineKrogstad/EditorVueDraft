# Спецификация REST API

## Endpoints

### Проекты (Projects)

#### Получить все проекты
**GET** `/projects`

- **Описание**: Возвращает список всех проектов.
- **Ответ**:
- **Статус**: `200 OK`
- **Тело**: JSON-массив проектов
```json
    [
        {
            "id": 1
        },
        {
            "id": 2
        }
    ]
```

### Посты (Posts)

#### Создать пост
**POST** `/posts`

- **Описание**: Создает новый пост. В процессе создания поста автоматически создаются связанные вложения и узел.
- **Параметры**:
  - **Тело запроса** (JSON):
    ```json
    {
      "content": {},
      "timestamp": "15.07.24",
      "project": 1,
      "channel": "channel_enum_value"  // Значение перечисления, представляющее канал (Личный/Командный/Публичный)
      "attachments": [
        {
          "path": "/path/to/attachment1",
          "name": "Attachment 1"
        },
        {
          "path": "/path/to/attachment2",
          "name": "Attachment 2"
        }
      ],
      "nodes": [
        {
          "post": 1
        }
      ]
    }
    ```
- **Ответ**:
  - **Статус**: `201 Created`
  - **Тело**: JSON-объект, представляющий созданный пост вместе с вложениями и узлом
  ```json
  {
    "id": 1,
    "content": {},
    "timestamp": "15.07.24",
    "project": 1,
    "channel": "channel_enum_value"  // Значение перечисления, представляющее канал (Личный/Командный/Публичный)
    "attachments": [
      {
        "id": 1,
        "path": "/path/to/attachment1",
        "name": "Attachment 1"
      },
      {
        "id": 2,
        "path": "/path/to/attachment2",
        "name": "Attachment 2"
      }
    ],
    "nodes": [
      {
        "id": 1,
        "post": 1
      }
    ]
  }
  ```

#### Получить все посты
**GET** `/posts`

- **Описание**: Возвращает список всех постов.
- **Ответ**:
  - **Статус**: `200 OK`
  - **Тело**: JSON-массив постов
```json
[
    {
        "id": 1,
        "content": {},
        "timestamp": "15.07.24",
        "project": 1,
        "channel": "channel_enum_value"
    },
    {
        "id": 2,
        "content": {},
        "timestamp": "15.07.24",
        "project": 2,
        "channel": "channel_enum_value"
    }
]
```

#### Получить посты по проекту
**GET** `/projects/{projectId}/posts`

- **Описание**: Возвращает список постов для конкретного проекта.
- **Параметры**:
  - `projectId` (integer, обязательный): ID проекта
- **Ответ**:
  - **Статус**: `200 OK`
  - **Тело**: JSON-массив постов для указанного проекта
```json
[
    {
        "id": 1,
        "content": {},
        "timestamp": "15.07.24",
        "project": 1,
        "channel": "channel_enum_value"
    }
]
```

#### Удалить пост
**DELETE** `/posts/{postId}`

- **Описание**: Удаляет пост по его ID, а также автоматически удаляет все связанные с ним узел и вложения.
- **Параметры**:
  - `postId` (integer, обязательный): ID поста
- **Ответ**:
  - **Статус**: `204 No Content`
  - **Тело**: Нет

#### Получить посты проекта по каналу
**GET** `/projects/{projectId}/posts?channel={channel}`

- **Описание**: Возвращает список постов для конкретного проекта, фильтруя их по указанному каналу.
- **Параметры**:
  - `projectId` (integer, обязательный): ID проекта
  - `channel` (string, обязательный): Значение канала. Возможные значения:
    - `Personal` (Личный)
    - `Team` (Командный)
    - `Public` (Публичный)
- **Ответ**:
  - **Статус**: `200 OK`
  - **Тело**: JSON-массив постов для указанного проекта и канала
  ```json
  [
    {
      "id": 1,
      "content": {},
      "timestamp": "15.07.24",
      "project": 1,
      "channel": "Personal"
    },
    {
      "id": 2,
      "content": {},
      "timestamp": "15.07.24",
      "project": 1,
      "channel": "Personal"
    }
  ]
  ```

### Вложения (Attachments)

#### Получить вложения по посту
**GET** `/posts/{postId}/attachments`

- **Описание**: Возвращает список вложений для конкретного поста.
- **Параметры**:
  - `postId` (integer, обязательный): ID поста
- **Ответ**:
  - **Статус**: `200 OK`
  - **Тело**: JSON-массив вложений для указанного поста
```json
[
    {
        "id": 1,
        "path": "path/to/file",
        "name": "filename.ext",
        "post": 1
    }
]
```

### Узлы (Nodes)

#### Получить пост по узлу
**GET** `/nodes/{nodeId}/post`

- **Описание**: Возвращает пост, связанный с конкретным узлом.
- **Параметры**:
  - `nodeId` (integer, обязательный): ID ноды
- **Ответ**:
  - **Статус**: `200 OK`
  - **Тело**: JSON-объект, представляющий пост
```json
{
    "id": 1,
    "content": {},
    "timestamp": "15.07.24",
    "project": 1,
    "channel": "channel_enum_value"
}
```

#### Получить все узлы
**GET** `/nodes`

- **Описание**: Возвращает список всех узлов.
- **Ответ**:
  - **Статус**: `200 OK`
  - **Тело**: JSON-массив нод
```json
[
    {
        "id": 1,
        "post": 1
    },
    {
        "id": 2,
        "post": 2
    }
]
```

## Модели данных

### Проект
```json
{
  "id": 1
}
```

### Пост
```json
{
  "id": 1,
  "content": {},
  "timestamp": "15.07.24",
  "project": 1,
  "channel": "channel_enum_value"
}
```

### Вложение
```json
{
  "id": 1,
  "path": "path/to/file",
  "name": "filename.ext",
  "post": 1
}
```

### Узел
```json
{
  "id": 1,
  "post": 1
}
```